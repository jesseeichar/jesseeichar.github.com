<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
      <title>Samples</title>
      <script type="text/javascript" src="../../js/shCore.js"></script><script type="text/javascript" src="../../js/shBrushScala.js"></script><link href="../../css/shCore.css" type="text/css" rel="stylesheet"></link><link href="../../css/shThemeDefault.css" type="text/css" rel="stylesheet"></link><link href="../../css/samples.css" type="text/css" rel="stylesheet"></link>
    </head>
    <body>
      <div id="maincontainer">
        <div id="topsection">
          <div class="innertube">
            <span>
        <h1>Samples</h1>
        <p class="summary"> Examples using file locks and executing multiple operations within the context of a single open file </p>
      </span>
          </div>
        </div>

        <div id="contentwrapper">
          <div id="contentcolumn">
            <div class="innertube">
              <span>
        <span></span>
        <div class="example">
      <a name="lock.html"><h3>Lock</h3></a>
      <div class="example_summary"><span> Perform an actions within a file lock </span></div>
      <div class="example_code">
        <pre class="brush: scala">
    import scalax.file.{FileOps, Path}

    val file: FileOps =  Path (&quot;file&quot;)

    implicit val codec = scalax.io.Codec.UTF8

    // By default the entire file is locked with exclusive access
    val result: Option[String] = file.withLock() { s =&gt;
      s.slurpString
    }

    // if the filesystem does not support locking then None will be returned
    result match {
      case None =&gt; file.slurpString // oh well this is the best I can do
      case Some(data) =&gt; data
    }

    def fail: Nothing = throw new AssertionError(&quot;Uh oh&quot;)

    // or perhaps we only lock part of the file
    val result2: Traversable[Byte] = file.withLock(10, 20) { s =&gt;
      s.bytes slice (10,20)
    } getOrElse {fail}



  
</pre>
      </div>
    </div><div class="example">
      <a name="operationBlock.html"><h3>Operation Block</h3></a>
      <div class="example_summary"><span> when several operation need to be performed on a file it is often more performant to execute them within an function passed to the open method this is because the underlying filesystem has options for optimizing the use of the file channels for example a file could be mapped into memory for the duration of the function and all operations could be performed using the same channel object </span></div>
      <div class="example_code">
        <pre class="brush: scala">
    import scalax.file.{FileOps, Path}
    // see codec examples in scala io core for details on why there is an implicit codec here
    implicit val codec = scalax.io.Codec.UTF8

    val file: FileOps =  Path (&quot;file&quot;)

    file.open()( f =&gt; {
      val s = f.slurpString
      file.write(s.replaceAll(&quot;l&quot;, &quot;L&quot;))
    })
  
</pre>
      </div>
    </div>
      </span>
            </div>
          </div>
        </div>

        <div id="leftcolumn">
          <div class="innertube">
            <div id="navcontainer">
      <ul id="projectnavlist"><li><a href="../../core/index.html" title="An idiomatic IO library for Scala" class="">Core</a>
          
        </li><li><a href="../../file/index.html" title="An adaptation of the Java NIO2 Filesystem to Scala" class="active">File</a>
          <ul id="navlist"><li><a href="../../file/creating-pathsets/index.html" title=" PathSets is a DSL API for selecting collections of Paths to operate on">Creating Pathsets</a></li><li><a href="../../file/create-temp/index.html" title=" Creating Temporary Files and directories ">Create Temp</a></li><li><a href="../../file/path-matcher/index.html" title=" Examples of using path matchers, such as IsFile, to select/match files and directories ">Path Matcher</a></li><li>
                      <a href="../../file/samples/index.html" title=" Examples using file locks and executing multiple operations within the context of a single open fil..." class="active">Samples</a>
                      <ul id="subnavlist"><li>
        <a href="lock.html" title=" Perform an actions within a file lock " class="">Lock</a>
      </li><li>
        <a href="operationBlock.html" title=" when several operation need to be performed on a file it is often more performant to execute them w..." class="">Operation Block</a>
      </li></ul>
                    </li><li><a href="../../file/implicits/index.html" title="">Implicits</a></li><li><a href="../../file/create-move-files-directories/index.html" title="">Create Move Files Directories</a></li><li><a href="../../file/execute/index.html" title="">Execute</a></li><li><a href="../../file/read-write-files/index.html" title=" A Path are both Input and Output objects as well as Seekable so all read/write options available th...">Read Write Files</a></li><li><a href="../../file/create-delete-files-and-directory/index.html" title="">Create Delete Files And Directory</a></li><li><a href="../../file/create-paths/index.html" title="">Create Paths</a></li><li><a href="../../file/roots/index.html" title="">Roots</a></li><li><a href="../../file/standard-path-operations/index.html" title=" Common/simple Path operations Nothing too fancy here">Standard Path Operations</a></li><li><a href="../../file/children/index.html" title=" Search the contents of a directory and perform operations on the objects encountered ">Children</a></li></ul>
        </li></ul>
    </div>
          </div>
        </div>

        <div id="footer">
          <div>Written by Jesse Eichar <a href="http://camptocamp.com">Camptocamp SA</a></div>
          <div>Twitter: <a href="http://twitter.com/jeichar">@jeichar</a></div>
          <div>(c) Jesse Eichar 2010-2011</div>
        </div>
      </div>
      <script type="text/javascript">
          SyntaxHighlighter.all()
        </script>
    </body>
  </html>